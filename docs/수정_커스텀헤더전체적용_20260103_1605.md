# 커스텀 헤더 전체 화면 적용

> 모든 화면에 상태바 간섭 방지 커스텀 헤더 적용

---

## 문서 정보

| 항목 | 내용 |
|------|------|
| 문서명 | 수정_커스텀헤더전체적용_20260103_1605.md |
| 카테고리 | 수정 |
| 생성일시 | 2026-01-03 16:05 KST |
| 작성자 | Claude |
| 버전 | v1.0.0 |
| 위치 | `C:/claude/claudeproject/bibleapp/docs/수정_커스텀헤더전체적용_20260103_1605.md` |

---

## 목차

1. [작업 배경](#1-작업-배경)
2. [해결 방법](#2-해결-방법)
3. [신규 생성 파일](#3-신규-생성-파일)
4. [수정된 파일 목록](#4-수정된-파일-목록)
5. [CustomHeader 컴포넌트](#5-customheader-컴포넌트)
6. [적용 결과](#6-적용-결과)

---

## 1. 작업 배경

### 문제점
- ReadingScreen에서 헤더가 안드로이드 상태바와 겹쳐 버튼 터치 불가 문제 발생
- 이전에 ReadingScreen만 커스텀 헤더로 수정했으나, 앱 전체 일관성 필요
- 사용자 요청: "방금 했던 헤더 작업을 앱 안에 모든 부분에 적용시켜줘"

### 해결 목표
- 앱의 모든 화면에 상태바 높이를 계산한 커스텀 헤더 적용
- 재사용 가능한 공통 CustomHeader 컴포넌트 생성
- 모든 네비게이션 스택에서 기본 헤더 숨김

---

## 2. 해결 방법

### 접근 방식
1. **공통 CustomHeader 컴포넌트 생성**
   - 상태바 높이 자동 계산 (`StatusBar.currentHeight`)
   - 뒤로 버튼, 타이틀, 오른쪽 버튼 지원

2. **네비게이션 스택 수정**
   - 모든 스택에 `headerShown: false` 적용

3. **화면별 커스텀 헤더 적용**
   - 각 화면에서 CustomHeader 사용
   - SafeContainer의 edges를 `['bottom']`으로 변경

---

## 3. 신규 생성 파일

### CustomHeader.tsx

| 항목 | 내용 |
|------|------|
| 경로 | `src/components/common/CustomHeader.tsx` |
| 용도 | 상태바 높이를 계산한 공통 헤더 컴포넌트 |

```typescript
// 핵심 코드
const STATUSBAR_HEIGHT = Platform.OS === 'android'
  ? (StatusBar.currentHeight || 24)
  : 44;

interface CustomHeaderProps {
  title: string;
  showBackButton?: boolean;
  backButtonText?: string;
  rightButton?: { text: string; onPress: () => void };
  rightComponent?: ReactNode;
}
```

### Props 설명
| Prop | 타입 | 기본값 | 설명 |
|------|------|--------|------|
| title | string | - | 헤더 타이틀 (필수) |
| showBackButton | boolean | true | 뒤로 버튼 표시 여부 |
| backButtonText | string | "← 뒤로" | 뒤로 버튼 텍스트 |
| rightButton | object | - | 오른쪽 텍스트 버튼 |
| rightComponent | ReactNode | - | 오른쪽 커스텀 컴포넌트 |

---

## 4. 수정된 파일 목록

### 4.1 네비게이션 스택 (4개)

| 파일 | 경로 | 변경 내용 |
|------|------|----------|
| BibleStack.tsx | `src/navigation/` | `headerShown: false` 적용, 옵션 제거 |
| SearchStack.tsx | `src/navigation/` | `headerShown: false` 적용 |
| MemoStack.tsx | `src/navigation/` | `headerShown: false` 적용 |
| SettingsStack.tsx | `src/navigation/` | `headerShown: false` 적용 |

### 4.2 HomeTab 화면 (1개)

| 화면 | 경로 | 변경 내용 |
|------|------|----------|
| HomeScreen | `src/screens/home/` | CustomHeader 추가, showBackButton=false |

### 4.3 BibleStack 화면 (4개)

| 화면 | 경로 | 변경 내용 |
|------|------|----------|
| BibleScreen | `src/screens/bible/` | CustomHeader 추가, showBackButton=false |
| ChapterSelectScreen | `src/screens/bible/` | CustomHeader 추가, 동적 타이틀 |
| ReadingScreen | `src/screens/bible/` | 기존 커스텀 헤더 유지 (이전 작업) |
| ShareScreen | `src/screens/share/` | CustomHeader 추가 |

### 4.4 SearchStack 화면 (2개)

| 화면 | 경로 | 변경 내용 |
|------|------|----------|
| SearchScreen | `src/screens/search/` | CustomHeader 추가, showBackButton=false |
| SearchResultScreen | `src/screens/search/` | CustomHeader 추가, 동적 타이틀 |

### 4.5 MemoStack 화면 (5개)

| 화면 | 경로 | 변경 내용 |
|------|------|----------|
| MemoListScreen | `src/screens/memo/` | CustomHeader 추가, showBackButton=false |
| MemoDetailScreen | `src/screens/memo/` | CustomHeader + rightComponent (공유/수정/삭제) |
| MemoEditScreen | `src/screens/memo/` | CustomHeader + rightButton (저장) |
| AnalyticsScreen | `src/screens/memo/` | CustomHeader 추가 |
| VerseHistoryScreen | `src/screens/memo/` | CustomHeader 추가 |

### 4.6 SettingsStack 화면 (4개)

| 화면 | 경로 | 변경 내용 |
|------|------|----------|
| SettingsScreen | `src/screens/settings/` | CustomHeader 추가, showBackButton=false |
| FontSizeScreen | `src/screens/settings/` | CustomHeader + SafeContainer 추가 |
| AboutScreen | `src/screens/settings/` | CustomHeader + SafeContainer 추가 |
| PasswordChangeScreen | `src/screens/settings/` | CustomHeader 추가 |

---

## 5. CustomHeader 컴포넌트

### 5.1 상태바 높이 계산

```typescript
const STATUSBAR_HEIGHT = Platform.OS === 'android'
  ? (StatusBar.currentHeight || 24)
  : 44;
```

- **Android**: `StatusBar.currentHeight` 사용 (기본값 24px)
- **iOS**: 고정 44px

### 5.2 스타일 구조

```typescript
const styles = StyleSheet.create({
  header: {
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'space-between',
    paddingHorizontal: 16,
    paddingBottom: 12,
    borderBottomWidth: 1,
  },
  leftContainer: { flex: 1, alignItems: 'flex-start' },
  rightContainer: { flex: 1, alignItems: 'flex-end' },
  title: { flex: 2, fontSize: 18, fontWeight: 'bold', textAlign: 'center' },
});
```

### 5.3 사용 예시

```tsx
// 기본 사용 (뒤로 버튼 있음)
<CustomHeader title="설정" />

// 탭 화면 (뒤로 버튼 없음)
<CustomHeader title="홈" showBackButton={false} />

// 오른쪽 버튼 추가
<CustomHeader
  title="메모 편집"
  rightButton={{ text: '저장', onPress: handleSave }}
/>

// 오른쪽 커스텀 컴포넌트
<CustomHeader
  title="메모 상세"
  rightComponent={<View>...</View>}
/>
```

---

## 6. 적용 결과

### 수정 통계
| 항목 | 개수 |
|------|------|
| 신규 생성 파일 | 1개 (CustomHeader.tsx) |
| 네비게이션 스택 수정 | 4개 |
| 화면 파일 수정 | 15개 |
| **총 수정 파일** | **20개** |

### 화면별 헤더 설정

| 화면 | 뒤로 버튼 | 오른쪽 버튼 |
|------|----------|------------|
| HomeScreen | X | - |
| BibleScreen | X | - |
| ChapterSelectScreen | O | - |
| ReadingScreen | O | 목록 |
| ShareScreen | O | - |
| SearchScreen | X | - |
| SearchResultScreen | O | - |
| MemoListScreen | X | - |
| MemoDetailScreen | O | 공유/수정/삭제 |
| MemoEditScreen | O | 저장 |
| AnalyticsScreen | O | - |
| VerseHistoryScreen | O | - |
| SettingsScreen | X | - |
| FontSizeScreen | O | - |
| AboutScreen | O | - |
| PasswordChangeScreen | O | - |

---

## 관련 문서

- 디버그_ReadingScreen헤더수정_20260103_1542.md - ReadingScreen 최초 헤더 수정
- bibleapp_WBS.md - 작업 진행 관리
