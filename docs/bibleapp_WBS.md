# BibleApp WBS (Work Breakdown Structure)

> 성경앱 프로젝트 작업 분해 구조 및 진척 관리

---

## 문서 정보

| 항목 | 내용 |
|------|------|
| 문서명 | bibleapp_WBS.md |
| 카테고리 | 메뉴얼 |
| 생성일시 | 2026-01-01 09:28 KST |
| 최종수정 | 2026-01-11 |
| 작성자 | Claude |
| 버전 | v2.9.0 |

---

## 1. 프로젝트 개요

| 항목 | 내용 |
|------|------|
| 프로젝트명 | BibleApp (성경앱) |
| 총 단계 | 13단계 |
| 현재 단계 | 13단계 완료 (Choco AI 감정분석 연동) |
| 전체 진척률 | 100% |

---

## 2. 작업 단계 요약

| 단계 | 작업명 | 상태 | 진척률 |
|------|--------|------|--------|
| 1단계 | 프로젝트 생성 및 의존성 설치 | 완료 | 100% |
| 2단계 | 폴더 구조 및 핵심 파일 생성 | 완료 | 100% |
| 3단계 | DatabaseService 구현 | 완료 | 100% |
| 4단계 | 서비스 레이어 구현 | 완료 | 100% |
| 5단계 | 화면 컴포넌트 고도화 | 완료 | 100% |
| 6단계 | 전체 통합 및 검증 | 완료 | 100% |
| 7단계 | 웹 호환성 작업 | 보류 | 40% |
| 8단계 | 안드로이드 에뮬레이터 실행 | 완료 | 100% |
| 9단계 | 전체 성경 데이터 통합 | 완료 | 100% |
| 10단계 | GitHub 저장소 연동 | 완료 | 100% |
| 11단계 | 버그 수정 (4건) | 완료 | 100% |
| 12단계 | 기능 개선 (주석, 검색 필터) | 완료 | 100% |
| 13단계 | Choco AI 감정분석 연동 | 완료 | 100% |

---

## 3. 7단계: 웹 호환성 작업 (보류)

| # | 세부 작업 | 상태 | 완료일시 |
|---|----------|------|----------|
| 7.1 | database/index.ts 웹 호환성 수정 | 완료 | 20260101_2300 |
| 7.2 | crypto.ts 웹 호환성 수정 | 완료 | 20260101_2305 |
| 7.3 | authService.ts 웹 호환성 수정 | 완료 | 20260101_2310 |
| 7.4 | shareService.ts 웹 호환성 수정 | 완료 | 20260101_2315 |
| 7.5 | bibleService.ts 웹 호환성 수정 | 대기 | - |
| 7.6 | memoService.ts 웹 호환성 수정 | 대기 | - |
| 7.7 | analyticsService.ts 웹 호환성 수정 | 대기 | - |
| 7.8 | 화면 컴포넌트 웹 호환성 확인 | 대기 | - |
| 7.9 | 웹 환경 테스트 | 대기 | - |
| 7.10 | 작업 문서화 | 완료 | 20260101_2323 |

---

## 4. 8단계: 안드로이드 에뮬레이터 실행 (완료)

| # | 세부 작업 | 상태 | 완료일시 |
|---|----------|------|----------|
| 8.1 | Android Studio 설치 | 완료 | 20260103_1020 |
| 8.2 | Android SDK 환경 확인 | 완료 | 20260103_1022 |
| 8.3 | 에뮬레이터 확인 (Pixel_6) | 완료 | 20260103_1024 |
| 8.4 | expo-file-system deprecated API 수정 | 완료 | 20260103_1028 |
| 8.5 | ADB 포트 포워딩 설정 | 완료 | 20260103_1030 |
| 8.6 | 앱 에뮬레이터 실행 성공 | 완료 | 20260103_1032 |
| 8.7 | 작업 문서화 | 완료 | 20260103_1034 |
| 8.8 | gap 스타일 호환성 수정 | 완료 | 20260103_1150 |
| 8.9 | 디버그 문서화 | 완료 | 20260103_1150 |
| 8.10 | 데이터베이스 테이블 누락 수정 | 완료 | 20260103_1210 |
| 8.11 | 디버그 문서화 (테이블 수정) | 완료 | 20260103_1210 |
| 8.12 | ReadingScreen 헤더 상태바 간섭 수정 | 완료 | 20260103_1542 |
| 8.13 | 디버그 문서화 (헤더 수정) | 완료 | 20260103_1542 |
| 8.14 | CustomHeader 공통 컴포넌트 생성 | 완료 | 20260103_1605 |
| 8.15 | 전체 화면 커스텀 헤더 적용 (16개 화면) | 완료 | 20260103_1605 |
| 8.16 | 수정 문서화 (커스텀 헤더 전체 적용) | 완료 | 20260103_1605 |
| 8.17 | 다중 성경 버전 지원 기능 추가 | 완료 | 20260103_1700 |
| 8.18 | 작업 문서화 (다중 버전 지원) | 완료 | 20260103_1700 |
| 8.19 | API 응답 형식 파싱 버그 수정 | 완료 | 20260103_1830 |
| 8.20 | 지원 버전 확장 (11개 버전, 5개 언어) | 완료 | 20260103_1830 |
| 8.21 | APK 빌드 및 실제 폰 설치 | 완료 | 20260103_1918 |
| 8.22 | APK 빌드 가이드 문서화 | 완료 | 20260103_1918 |

---

## 5. 9단계: 전체 성경 데이터 통합 (완료)

| # | 세부 작업 | 상태 | 완료일시 |
|---|----------|------|----------|
| 9.1 | 성경 66권 메타데이터 생성 (bibleMetadata.ts) | 완료 | 20260103_1330 |
| 9.2 | 개역한글 성경 파일 확보 (foxcg.com) | 완료 | 20260103_1335 |
| 9.3 | EUC-KR 인코딩 파싱 스크립트 작성 (iconv-lite) | 완료 | 20260103_1340 |
| 9.4 | 책 코드 매핑 수정 (Exo, Mat 등 3글자 코드) | 완료 | 20260103_1345 |
| 9.5 | JSON 파일 생성 (ot_part1, ot_part2, nt, stats) | 완료 | 20260103_1350 |
| 9.6 | tsconfig.json JSON 모듈 지원 추가 | 완료 | 20260103_1352 |
| 9.7 | database/index.ts JSON import 및 로더 수정 | 완료 | 20260103_1355 |
| 9.8 | FORCE_DB_RECREATE=true로 DB 재생성 | 완료 | 20260103_1357 |
| 9.9 | 31,102절 데이터 로드 확인 | 완료 | 20260103_1358 |
| 9.10 | FORCE_DB_RECREATE=false로 복구 | 완료 | 20260103_1359 |
| 9.11 | 작업 문서화 | 완료 | 20260103_1400 |

### 9단계 성과
- **총 구절 수**: 31,102절 (구약 23,145절 + 신약 7,957절)
- **총 권수**: 66권 (구약 39권 + 신약 27권)
- **JSON 파일 구조**:
  - `ot_part1.json`: 16,400절 (창세기-시편)
  - `ot_part2.json`: 6,745절 (잠언-말라기)
  - `nt.json`: 7,957절 (신약 전체)
  - `stats.json`: 통계 정보

---

## 6. 10단계: GitHub 저장소 연동 (완료)

| # | 세부 작업 | 상태 | 완료일시 |
|---|----------|------|----------|
| 10.1 | Git 저장소 상태 확인 | 완료 | 20260104_0910 |
| 10.2 | .gitignore 수정 (nul, dist-test 추가) | 완료 | 20260104_0912 |
| 10.3 | 파일 스테이징 (96개 파일) | 완료 | 20260104_0914 |
| 10.4 | Git 사용자 설정 | 완료 | 20260104_0915 |
| 10.5 | 초기 커밋 생성 | 완료 | 20260104_0916 |
| 10.6 | GitHub 원격 저장소 연결 | 완료 | 20260104_0917 |
| 10.7 | main 브랜치 푸시 | 완료 | 20260104_0917 |
| 10.8 | 작업 문서화 | 완료 | 20260104_0917 |

### 10단계 성과
- **저장소 URL**: https://github.com/chohkcloud/bibleapp
- **브랜치**: main
- **커밋 파일**: 96개 파일, 24,781줄
- **커밋 해시**: 3e75f56

---

## 7. 11단계: 버그 수정 (완료)

> 상세 내용은 [BUG_LIST.md](./BUG_LIST.md) 참조

| # | 세부 작업 | 버그 ID | 우선순위 | 상태 | 완료일시 |
|---|----------|---------|----------|------|----------|
| 11.1 | 검색 결과 100건 제한 수정 | BUG-001 | 🟠 높음 | ✅ 완료 | 20260104_1111 |
| 11.2 | 책 이름 검색 불가 수정 | BUG-002 | 🟠 높음 | ✅ 완료 | 20260104_1111 |
| 11.3 | 묵상노트 키보드 UI 개선 | BUG-003 | 🟡 보통 | ✅ 완료 | 20260104_1111 |
| 11.4 | 다국어 성경 다운로드 수정 | BUG-004 | 🔴 긴급 | ✅ 완료 | 20260104_1111 |
| 11.5 | 버그 수정 테스트 | - | - | ✅ 완료 | 20260104_1111 |
| 11.6 | 작업 문서화 | - | - | ✅ 완료 | 20260104_1111 |

### 11단계 성과
- **BUG-004**: API URL 변경 및 다운로드 방식 개선 (영어 7개 버전 지원)
- **BUG-001**: 검색 결과 제한 100 → 500건, 페이지네이션 지원
- **BUG-002**: 책 이름/약어 검색 기능 추가
- **BUG-003**: 키보드 높이 감지 및 자동 스크롤 구현

---

## 8. 12단계: 기능 개선 (완료)

| # | 세부 작업 | 상태 | 완료일시 |
|---|----------|------|----------|
| 12.1 | 구절별 인라인 주석 표시 기능 추가 | ✅ 완료 | 20260104_1230 |
| 12.2 | 모달에서 바로 주석 입력/수정/삭제 UI 추가 | ✅ 완료 | 20260104_1235 |
| 12.3 | 주석 표시 토글 버튼 추가 (헤더) | ✅ 완료 | 20260104_1240 |
| 12.4 | 검색 책 필터 기능 추가 | ✅ 완료 | 20260104_1250 |
| 12.5 | 책 선택 모달 UI 구현 (구약/신약 분류) | ✅ 완료 | 20260104_1255 |
| 12.6 | Git 커밋 및 푸시 | ✅ 완료 | 20260104_1302 |

### 12단계 성과
- **구절별 주석 기능**: 구절 터치 시 바로 주석 입력/수정/삭제 가능
- **인라인 주석 표시**: 구절 아래에 💬 아이콘과 함께 주석 내용 표시
- **주석 토글**: 헤더의 📝 버튼으로 주석 표시/숨기기
- **검색 책 필터**: 특정 책(예: 마가복음)에서만 검색 가능
- **책 선택 모달**: 구약 39권, 신약 27권 분류된 UI로 책 선택
- **커밋 해시**: 7a7385d

---

## 9. 13단계: Choco AI 감정분석 연동 (완료)

| # | 세부 작업 | 상태 | 완료일시 |
|---|----------|------|----------|
| 13.1 | chocoService.ts 생성 (API 통신 서비스) | ✅ 완료 | 20260111 |
| 13.2 | 하이브리드 감정분석 API 연동 (KPoEM, KOTE, KOSAC) | ✅ 완료 | 20260111 |
| 13.3 | 플랫폼별 API URL 자동 설정 | ✅ 완료 | 20260111 |
| 13.4 | 감정별 아이콘/색상 매핑 구현 | ✅ 완료 | 20260111 |
| 13.5 | MemoDetailScreen 감정분석 결과 UI 구현 | ✅ 완료 | 20260111 |
| 13.6 | MemoEditScreen 실시간 감정분석 미리보기 추가 | ✅ 완료 | 20260111 |
| 13.7 | 디바운스 처리 (2초) 구현 | ✅ 완료 | 20260111 |
| 13.8 | services/index.ts 에 chocoService export 추가 | ✅ 완료 | 20260111 |
| 13.9 | Git 커밋 및 푸시 | ✅ 완료 | 20260111 |

### 13단계 성과
- **신규 파일**: `src/services/chocoService.ts`
- **수정 파일**: `MemoDetailScreen.tsx`, `MemoEditScreen.tsx`, `index.ts`
- **API 엔드포인트**: `POST /api/sentiment/hybrid`
- **RAG 데이터소스**: KPoEM (한국 현대시), KOTE (온라인 댓글), KOSAC (감정 사전)
- **UI 기능**:
  - 주요 감정 대형 디스플레이 (아이콘 + 텍스트)
  - 분위기 설명, 감정 태그, 핵심 표현 표시
  - RAG 참조 정보 (KPoEM/KOTE/KOSAC 매칭 수)
  - 실시간 미리보기 (20자 이상 입력 시 자동 분석)
- **커밋 해시**: 8387f92

---

## 10. 현재 이슈 (7단계 관련)

### 문제: import.meta 에러
- 에러: Uncaught SyntaxError: Cannot use import.meta outside a module
- 원인: expo-sqlite, expo-secure-store 등 네이티브 모듈이 웹에서 로드 시 에러
- 해결 시도: Platform.OS 조건부 처리, 동적 require() 사용

### 완료된 수정 파일
- database/index.ts (웹 목업 모드)
- crypto.ts (Web Crypto API)
- authService.ts (localStorage)
- shareService.ts (navigator.share)

### 남은 작업
- bibleService.ts, memoService.ts, analyticsService.ts 확인
- 화면 컴포넌트 네이티브 모듈 import 확인

---

## 7. 작업 기록

| # | 일시 (KST) | 단계 | 작업 내용 |
|---|------------|------|----------|
| 1 | 20260101_0900 | 1단계 | 프로젝트 생성 및 의존성 설치 |
| 2 | 20260101_0923 | 2단계 | 폴더 구조 및 핵심 파일 생성 |
| 3 | 20260101_0955 | 3단계 | DatabaseService 구현 |
| 4 | 20260101_1535 | 4단계 | 서비스 레이어 구현 |
| 5 | 20260101_1556 | 5단계 | 화면 컴포넌트 고도화 |
| 6 | 20260101_1810 | 6단계 | 전체 통합 및 검증 |
| 7 | 20260101_2323 | 7단계 | 웹 호환성 작업 (보류) |
| 8 | 20260103_1034 | 8단계 | 안드로이드 에뮬레이터 실행 환경 구성 완료 |
| 9 | 20260103_1150 | 8단계 | gap 스타일 호환성 수정 (8개 파일, margin 방식으로 변환) |
| 10 | 20260103_1210 | 8단계 | 데이터베이스 테이블 누락 수정 (highlights, bookmarks, memo_tag_map 추가) |
| 11 | 20260103_1400 | 9단계 | 전체 성경 데이터 통합 (66권, 31,102절 - 개역한글) |
| 12 | 20260103_1542 | 8단계 | ReadingScreen 헤더 상태바 간섭 수정 (커스텀 헤더 구현) |
| 13 | 20260103_1605 | 8단계 | CustomHeader 컴포넌트 생성 및 전체 화면 적용 (16개 화면, 4개 네비게이션 스택) |
| 14 | 20260103_1700 | 8단계 | 다중 성경 버전 지원 기능 추가 (API 서비스, 다운로드, 버전 선택 화면) |
| 15 | 20260103_1830 | 8단계 | API 응답 형식 파싱 버그 수정 및 지원 버전 확장 (11개 버전, 5개 언어) |
| 16 | 20260103_1918 | 8단계 | APK 빌드 및 실제 폰 설치 성공, 배포 가이드 문서화 |
| 17 | 20260104_0917 | 10단계 | GitHub 저장소 연동 (96개 파일, 24,781줄 푸시) |
| 18 | 20260104_0925 | 11단계 | 버그 리스트 등록 (4건: 검색, 키보드 UI, 다운로드) |
| 19 | 20260104_1111 | 11단계 | 버그 4건 모두 해결 (BUG-001~004), 프로젝트 완료 |
| 20 | 20260104_1302 | 12단계 | 구절별 주석 기능 추가 (인라인 표시, 모달 입력/수정/삭제) |
| 21 | 20260104_1302 | 12단계 | 검색 책 필터 기능 추가 (구약/신약 분류 모달) |
| 22 | 20260111 | 13단계 | Choco AI 감정분석 서비스 연동 (chocoService.ts 생성) |
| 23 | 20260111 | 13단계 | MemoDetailScreen 감정분석 결과 UI 구현 |
| 24 | 20260111 | 13단계 | MemoEditScreen 실시간 감정분석 미리보기 추가 |

---

## 문서 업데이트 이력

| 날짜 | 버전 | 변경 내용 |
|------|------|----------|
| 2026-01-01 09:28 | v1.0.0 | 최초 WBS 문서 생성 |
| 2026-01-01 18:10 | v1.4.0 | 6단계 완료 (프로젝트 완료) |
| 2026-01-01 23:23 | v1.5.0 | 7단계 추가 (웹 호환성 보류) |
| 2026-01-03 10:34 | v1.6.0 | 8단계 추가 (안드로이드 에뮬레이터 실행) |
| 2026-01-03 11:50 | v1.7.0 | 8단계 gap 스타일 호환성 수정 작업 추가 |
| 2026-01-03 12:10 | v1.8.0 | 8단계 데이터베이스 테이블 누락 수정 추가 |
| 2026-01-03 14:00 | v1.9.0 | 9단계 추가 (전체 성경 데이터 통합 - 66권, 31,102절) |
| 2026-01-03 15:42 | v2.0.0 | 8단계 ReadingScreen 헤더 상태바 간섭 수정 작업 추가 |
| 2026-01-03 16:05 | v2.1.0 | 8단계 CustomHeader 컴포넌트 생성 및 전체 화면 적용 추가 |
| 2026-01-03 17:00 | v2.2.0 | 8단계 다중 성경 버전 지원 기능 추가 |
| 2026-01-03 18:30 | v2.3.0 | 8단계 API 파싱 버그 수정 및 지원 버전 확장 (11개 버전, 5개 언어) |
| 2026-01-03 19:18 | v2.4.0 | 8단계 APK 빌드 및 실제 폰 설치 성공, 배포 가이드 문서화 |
| 2026-01-04 09:17 | v2.5.0 | 10단계 GitHub 저장소 연동 완료 |
| 2026-01-04 09:25 | v2.6.0 | 11단계 버그 수정 추가 (4건), BUG_LIST.md 생성 |
| 2026-01-04 11:11 | v2.7.0 | 11단계 버그 4건 모두 해결 완료, 프로젝트 100% 완료 |
| 2026-01-04 13:02 | v2.8.0 | 12단계 기능 개선 추가 (구절별 주석, 검색 책 필터) |
| 2026-01-11 | v2.9.0 | 13단계 Choco AI 감정분석 연동 (chocoService, UI 구현) |
